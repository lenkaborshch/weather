(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{102:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(0),a=n.n(r),i=n(17),s=n.n(i),o=(n(102),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,175)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))}),u=n(18),d=n(166),j=n(167),l=n(57),b=n(165),h=n(168),O=n(10),p=n(172),m=n(169),f="TOGGLE_IS_LOADING",x="SET_ERROR",y={isLoading:!1,error:null},v=function(e){return{type:f,isLoading:e}},C=function(e){return{type:x,error:e}},g=function(e){return Object(c.jsx)(m.a,Object(O.a)({elevation:6,variant:"filled"},e))},N=function(){var e=Object(u.c)((function(e){return e.app.error})),t=Object(u.b)(),n=function(e,n){"clickaway"!==n&&t(C(null))};return Object(c.jsx)(p.a,{open:!!e,autoHideDuration:6e3,onClose:n,children:Object(c.jsx)(g,{onClose:n,severity:"error",children:e})})},w=n(13),T=n(88),S=n(31),k=n.n(S),D=n(56),A=n(65),I=n(82),E="d047497993add0ea996af560b7e11c70",L=n.n(I).a.create({baseURL:"https://api.openweathermap.org/data/2.5/"}),_=function(e){return L.get("weather?appid=".concat(E,"&units=metric&q=").concat(e)).then((function(e){return e.data}))},F=function(e){return L.get("group?id=".concat(e,"&appid=").concat(E,"&units=metric")).then((function(e){return e.data}))},W=function(e,t){return L.get("onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=daily,alerts,minutely&appid=").concat(E,"&units=metric")).then((function(e){return e.data}))},R=function(e){return"https://openweathermap.org/img/wn/".concat(e,"@2x.png")},H="ADD_CITY_CARD",P="DELETE_CITY_CARD",J="UPDATE_CITY_CARD",M="SET_DETAILS_CITY_CARD",B={citiesCards:[],detailsCityCard:{}},U=function(e){return{type:H,cityCard:e}},Y=function(e,t){return function(){var n=Object(D.a)(k.a.mark((function n(c,r){var a,i;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(v(!0)),n.next=4,_(e);case 4:a=n.sent,"ADD"===t?(i=r().citiesCardsWeather.citiesCards.find((function(e){return e.id===a.id})),c(i?C("This city was selected"):U(a))):"UPDATE"===t&&c({type:J,cityCard:a}),c(v(!1)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),c(C("Error! This city not found")),c(v(!1));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},G=n(170),q=n(159),z=n(158),V=n(174),K=Object(z.a)((function(){return Object(V.a)({formSearch:{padding:"30px",textAlign:"center"},inputFormSearch:{margin:"5px"}})})),Q=a.a.memo((function(){var e=K(),t=Object(u.c)((function(e){return e.app.isLoading})),n=Object(u.b)(),r=Object(T.a)({initialValues:{cityName:""},onSubmit:function(e){n(Y(e.cityName,"ADD")),r.resetForm()}});return Object(c.jsxs)("form",{onSubmit:r.handleSubmit,className:e.formSearch,children:[Object(c.jsx)(G.a,Object(O.a)(Object(O.a)({placeholder:"City"},r.getFieldProps("cityName")),{},{onChange:r.handleChange,value:r.values.cityName,className:e.inputFormSearch})),Object(c.jsx)(q.a,{type:"submit",disabled:t||!r.values.cityName,variant:"contained",color:"primary",children:"Add"})]})})),X=n(164),Z=n(163),$=n(173),ee=n(157),te=n(84),ne=n.n(te),ce=n(161),re=n(160),ae=function(e){var t=new Date(1e3*e),n=t.getHours(),c=t.getMinutes();return n<10?c<10?"0".concat(n,":0").concat(c):"0".concat(n,":").concat(c):"".concat(n,":00")},ie=Object(z.a)((function(){return Object(V.a)({cityName:{lineHeight:"1"},headerCard:{maxHeight:"50px"}})})),se=a.a.memo((function(e){var t=e.cityId,n=e.cityName,r=function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()];return"".concat(n," ").concat(e.getDate()," ").concat(t)}(new Date),a=Object(u.b)(),i=ie();return Object(c.jsx)(re.a,{className:i.headerCard,action:Object(c.jsxs)("div",{children:[Object(c.jsx)($.a,{title:"Refresh",children:Object(c.jsx)(ee.a,{onClick:function(){a(Y(n,"UPDATE"))},children:Object(c.jsx)(ne.a,{})})}),Object(c.jsx)($.a,{title:"Delete",children:Object(c.jsx)(ee.a,{onClick:function(){a(function(e){return{type:P,cityId:e}}(t))},children:Object(c.jsx)(ce.a,{})})})]}),title:Object(c.jsx)(l.a,{variant:"h5",component:"h1",className:i.cityName,children:n}),subheader:r})})),oe=n(162),ue=function(e){return Math.round(e)},de=Object(z.a)((function(){return Object(V.a)({cardContent:{cursor:"pointer"},tempNow:{textAlign:"center",fontSize:"30px"},iconWeather:{display:"block",marginLeft:"auto",marginRight:"auto"}})})),je=a.a.memo((function(e){var t=e.cityName,n=e.infoByTemp,r=e.wind,a=e.icon,i=function(e){var t=Object(O.a)({},e);for(var n in t)t[n]=ue(t[n]);return t}(Object(O.a)({},n)),s=ue(r.speed),o=de(),u=Object(w.f)();return Object(c.jsxs)(oe.a,{onClick:function(){u.push("/details/".concat(t))},className:o.cardContent,children:[Object(c.jsxs)(l.a,{variant:"h5",component:"p",className:o.tempNow,children:[i.temp,"\xb0C"]}),Object(c.jsx)("img",{className:o.iconWeather,src:R(a),alt:"weatherImage"}),Object(c.jsxs)(l.a,{variant:"body2",color:"textSecondary",component:"p",children:["Feels like: ",i.feels_like," \u2103"]}),Object(c.jsxs)(l.a,{variant:"body2",color:"textSecondary",component:"p",children:["High: ",i.temp_max," \u2103"]}),Object(c.jsxs)(l.a,{variant:"body2",color:"textSecondary",component:"p",children:["Low: ",i.temp_min," \u2103"]}),Object(c.jsxs)(l.a,{variant:"body2",color:"textSecondary",component:"p",children:["Wind: ",s," m/s"]})]})})),le=Object(z.a)((function(){return Object(V.a)({root:{width:250,height:350,background:"rgba(242, 173, 104, 0.6)"}})})),be=a.a.memo((function(e){var t=le();return Object(c.jsxs)(Z.a,{className:t.root,children:[Object(c.jsx)(se,{cityId:e.cityId,cityName:e.cityName}),Object(c.jsx)(je,Object(O.a)({},e))]})})),he=a.a.memo((function(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Q,{}),Object(c.jsx)(X.a,{container:!0,spacing:3,children:e.cities.map((function(e){return Object(c.jsx)(X.a,{item:!0,children:Object(c.jsx)(be,{cityId:e.id,cityName:e.name,infoByTemp:e.main,wind:e.wind,icon:e.weather[0].icon})},e.id)}))})]})})),Oe=n(85),pe=a.a.memo((function(e){var t=e.detailCityCard.hourly.map((function(e){return[ae(e.dt),ue(e.temp)]})),n=[["Hour","Temperature"]];if(t)for(var r=0;r<24;r++)n.push(t[r]);return Object(c.jsx)(X.a,{item:!0,style:{textAlign:"center"},children:Object(c.jsx)(Oe.a,{width:"600px",height:"400px",chartType:"LineChart",loader:Object(c.jsx)("div",{children:"Loading Chart"}),data:n,options:{hAxis:{title:"Hour"},vAxis:{title:"Temperature"},legend:"none",backgroundColor:"transparent",series:{0:{color:"#e2431e"}}}})})})),me=Object(z.a)((function(){return Object(V.a)({cityName:{marginTop:"15px"}})})),fe=a.a.memo((function(e){var t=me(),n=e.cityName,r=e.currentTemp,a=e.descriptionWeather;return Object(c.jsxs)("div",{children:[Object(c.jsx)(l.a,{variant:"h3",className:t.cityName,children:n}),Object(c.jsxs)(l.a,{variant:"h4",children:[r,"\xb0C"]}),Object(c.jsx)(l.a,{variant:"subtitle2",children:a})]})})),xe=a.a.memo((function(e){var t=e.feelsLikeTemp,n=e.humidity,r=e.sunrise,a=e.sunset;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(l.a,{variant:"h6",children:["Feels like: ",t," \xb0C"]}),Object(c.jsxs)(l.a,{variant:"h6",children:["Humidity: ",n," %"]}),Object(c.jsxs)(l.a,{variant:"h6",children:["Sunrise: ",r]}),Object(c.jsxs)(l.a,{variant:"h6",children:["Sunset: ",a]})]})})),ye=Object(z.a)((function(){return Object(V.a)({detailsPageWeather:{textAlign:"center"},additionalInfo:{marginTop:"70px"}})})),ve=a.a.memo((function(){var e=ye(),t=Object(w.f)(),n=Object(u.b)(),a=Object(w.g)(),i=Object(u.c)((function(e){return e.citiesCardsWeather.citiesCards})).find((function(e){return e.name===a.cityName})),s=Object(u.c)((function(e){return e.citiesCardsWeather.detailsCityCard}));if(Object(r.useEffect)((function(){var e,t;i&&n((e=i.coord.lat,t=i.coord.lon,function(){var n=Object(D.a)(k.a.mark((function n(c){var r;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(v(!0)),n.next=4,W(e,t);case 4:r=n.sent,c({type:M,detailsCityCard:r}),c(v(!1)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),c(C("Error!")),c(v(!1));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()))}),[i,n]),0===Object.keys(s).length)return Object(c.jsx)(b.a,{});var o=ue(s.current.temp),d=s.current.weather[0].main,j=ue(s.current.feels_like),l=s.current.humidity,h=ae(s.current.sunrise),O=ae(s.current.sunset);return Object(c.jsxs)("div",{className:e.detailsPageWeather,children:[Object(c.jsx)(fe,{cityName:a.cityName,currentTemp:o,descriptionWeather:d}),Object(c.jsxs)(X.a,{container:!0,spacing:3,children:[Object(c.jsx)(X.a,{item:!0,children:Object(c.jsx)(pe,{detailCityCard:s})}),Object(c.jsx)(X.a,{item:!0,className:e.additionalInfo,children:Object(c.jsx)(xe,{feelsLikeTemp:j,humidity:l,sunrise:h,sunset:O})})]}),Object(c.jsx)(q.a,{onClick:function(){t.push("/")},variant:"contained",color:"secondary",children:"Come back"})]})})),Ce=function(){var e=Object(u.c)((function(e){return e.app.isLoading})),t=Object(u.c)((function(e){return e.app.error})),n=Object(u.c)((function(e){return e.citiesCardsWeather.citiesCards})),a=Object(u.b)();return Object(r.useEffect)((function(){var e=localStorage.getItem("cityCards");if(e&&"[]"!==e){var t=JSON.parse(e).reverse().join();a(function(e){return function(){var t=Object(D.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(v(!0)),t.next=4,F(e);case 4:t.sent.list.forEach((function(e){return n(U(e))})),n(v(!1)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(C("Error!")),n(v(!1));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}),[a]),Object(r.useEffect)((function(){localStorage.setItem("cityCards",JSON.stringify(n.map((function(e){return e.id}))))}),[n]),Object(c.jsxs)("div",{children:[t&&Object(c.jsx)(N,{}),Object(c.jsxs)(d.a,{position:"static",children:[Object(c.jsx)(j.a,{children:Object(c.jsx)(l.a,{variant:"h6",children:"Weather"})}),e&&Object(c.jsx)(b.a,{color:"secondary"})]}),Object(c.jsx)(h.a,{fixed:!0,children:Object(c.jsxs)(w.c,{children:[Object(c.jsx)(w.a,{exact:!0,path:"/",children:Object(c.jsx)(he,{cities:n})}),Object(c.jsx)(w.a,{path:"/details/:cityName",children:Object(c.jsx)(ve,{})})]})})]})},ge=n(38),Ne=n(87),we=Object(ge.c)({citiesCardsWeather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(O.a)(Object(O.a)({},e),{},{citiesCards:[t.cityCard].concat(Object(A.a)(e.citiesCards))});case P:return Object(O.a)(Object(O.a)({},e),{},{citiesCards:e.citiesCards.filter((function(e){return e.id!==t.cityId}))});case J:var n=e.citiesCards.findIndex((function(e){return e.id===t.cityCard.id}));return e.citiesCards[n]=t.cityCard,Object(O.a)(Object(O.a)({},e),{},{citiesCards:Object(A.a)(e.citiesCards)});case M:return Object(O.a)(Object(O.a)({},e),{},{detailsCityCard:t.detailsCityCard});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(O.a)(Object(O.a)({},e),{},{isLoading:t.isLoading});case x:return Object(O.a)(Object(O.a)({},e),{},{error:t.error});default:return e}}}),Te=Object(ge.d)(we,Object(ge.a)(Ne.a));window.store=Te;var Se=n(41);s.a.render(Object(c.jsx)(u.a,{store:Te,children:Object(c.jsx)(Se.a,{children:Object(c.jsx)(Ce,{})})}),document.getElementById("root")),o()}},[[129,1,2]]]);
//# sourceMappingURL=main.315a6517.chunk.js.map